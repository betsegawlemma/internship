* Introduction
* Findings
** Introduction
** Related Work
** Contribution
** Bibliography 
*** DONE ECOFEN: an End-to-end energy Cost mOdel and simulator For Evaluating power consumption in large-scale Networks
    CLOSED: [2017-01-15 dim. 22:48]
     
      Anne-Cecile et. al. proposed a novel energy cost model and simulator for large scale wired networks. This model first estimates the power consumption of each equipment involved in the network.
      A network equipment such as router and NIC consumes energy during boot, during shutdown and during the working period between these two processes, the later is referred to as E_work and this is
      the energy cost the authors considered in the proposed model. They further characterized the energy consumed during the working period as fixed (E_idle) and variable (E_variable) energy cost. The fixed 
      energy cost, which depends on the equipment type (NIC, router, switch) and the manufacturer, is the energy consumed when the device is in the working period but not actually doing any network 
      transfer task. The variable cost, on the other hand, is the energy consumed while the equipment is in the working period and is also doing some network transfer task. This cost depends on the 
      bandwidth of the port or the interface used in the transfer, the length of time required to do the transfer and the total number of parallel transfers occurring in the device. The energy model in 
      the second step, estimates the total energy cost of the network by summing the E_idle cost of each equipment involved and E_variable cost occurring at each port or interface of the equipment.
      If there are parallel transfers occurring at a given equipment the E_idle cost of the equipment is considered only once.
    
      After proposing the model, the authors have evaluated it by implementing NS2 simulator of the model and also run different experiments such as energy cost of different network topology, the effect
      of varying traffic on energy cost, evaluation of energy saving techniques, and evaluation of energy cost for large scale networks. 

      Even though this study is a foundation work for modeling energy cost of large scale models, further work is required to include to the model the energy cost incurred during boot and shutdown time. 
      In addition, though the authors simulated the energy saving techniques such as ON/OFF technique in their experiments, their proposed model did not include energy saving technique as one of its parameter. 
      Further more, to allow to study the impact of energy saving technique on performance, performance metrics should be incorporated into the model to make it better decision making tool to compare energy
      saving techniques.    
*** TODO On the Energy Efficiency of Sleeping and Rate Adaptation for Network Devices
    Energy saving techniques can generally be put into two categories, rate adaptation and sleeping. Rate adaptation is a technique used to adapt the network rate to the actual traffic rate. 
    Adaptive Link Rate (ALR) is a typical implementation of this technique. Sleeping technique on the other hand, allows a network device to send data as fast as possible and then enter 
    low power mode between transfers. A typical implementation of this technique is Low Power Idle (LPI). The sleep duration can further be improved by packet coalescing in order to save more 
    energy. 

    ALR uses a buffer occupancy thresh hold between rates and this might lead to a problem known as oscillation condition as switching between rates costs time and energy. Similarly, in the LPI case,
    entering and leaving low power mode also costs time and energy.   
*** TODO [[http://hal.inria.fr/hal-00872476/PDF/tomacs.pdf][On the Validity of Flow-level TCP Network Models for Grid and Cloud Simulations]]
    
*** DONE [[https://hal.inria.fr/hal-01017319/PDF/simgrid3-journal.pdf][Versatile, Scalable, and Accurate Simulation of Distributed Applications and Platforms]]
    CLOSED: [2017-01-16 lun. 20:11]
      Casanova et. al. in this study explored the design of versatile, scalable, and accurate simulation of distributed applications and platforms in the context of SimGrid simulator. 
      They first explained three basic simulator components common in most popular simulators: simulation model, platform specification and application specification. Simulation model is the component that
      realizes the simulated real-network resources (CPU, Router, Host), the simulated applications which utilize the resources and the progress of the applications. Platform specification is the mechanism
      by which users specify the characteristics of simulated platform. Application specification is the interface which users use to specify the steps and properties of the simulated activities. 

      Through out the paper the authors in general classified simulator models into two - analytical and discrete-event based models. Analytical models are preferred in the domain of large scale parallel and 
      distributed computing due to scalablilty requirement. However, these models tend to produce less accurate result than discrete-event based models. Discrete-event based models are close to reality in capturing
      real-world scenario, hence give more accurate results. Due to their accuracy, discrete-event models often used to evaluate analytical models. In the network domain, the term flow-based model is used to
      refer to analytical models likewise, the term packet-level model is used to refer to discrete-event models.

      In the field of large scale parallel and distributed computing, CPU is modeled by compute delay, storage by seek time and fixed data transfer rate and network by link latency and link bandwidth. 
      However, many of the network models available are specific to one domain of distributed and parallel applications and abstract out network concepts which are irrelevant for their particular field. Unlike
      most simulators in this field SimGrid is designed to be versatile.

      SimGrid follows a layered/hierarchical approach in its internal structure. The top layer constitutes three user APIs: MSG, SMPI, and SIMDAG. Both MSG and SMPI are used to describe the simulated application
      as concurrent processes while SIMDAG allows users to describe their simulated application as abstract task graph. The middle layer - SIMIX, implements SMPI and MSG APIs. The bottom layer-SURF is the core 
      component which simulate the user specified activities on the simulated resources.

      The authors then explained step-by-step, the challenges and corresponding solutions of designing flow-based bandwidth sharing model for TCP, which is the model adopted in SimGrid and it is Max-Min fairness 
      bandwidth sharing model adapted to match TCP's characteristics. They next conducted multiple invalidation experiment and compared the result with GTNetS, packet-level simulator. The result demonstrated that
      their model works very good in most scenarios but there are some cases which the model fails for those instances the authors recommend to use packet-level simulator. 
      
      As a final work, in order to demonstrate the versatility, accuracy and scalablilty of SimGrid, the authors described several case studies conducted in the field of parallel and distributed applications with 
      graphs comparing the results of the experiments with ground truth and other simulators. 
 
*** DONE [[http://ieeexplore.ieee.org/document/5522467/][Energy efficiency in the future internet: a survey of existing approaches and trends in energy-aware fixed network infrastructures]]
    CLOSED: [2017-01-16 lun. 22:00]
      Energy reduction is sought for economic reasons in order to decrease electricity bills and/or to reduce the emission of CO2. Power consumption in a network can be as a result of data and control planes or as a results
      of auxilary activities such as power supply and cooling. The data plane consumes 54%, power and heat management 35% and the control plane 11%. 
     
      Power consumption characteristics of high-end routers looks like the following: Internal packet processing engines consume about 60%, network interfaces during transfers 13%, switching fabrics 18.5% and buffer management 8.5%.
      Accordingly, the authors suggest that energy efficiency strategy should focus on internal efficiency for core network and interfaces and links efficiency for access networks.

      The authors in this survey classified power saving techniques into three categories: re-engineering, energy adaptation and sleeping/standby.
  
      Re-engineering approach concerned with designing energy efficient network equipment. Dynamic adaptation deals with adapting the capacity of packet processing engines and network interfaces to match 
      the actual traffic load. This can be achieved by dynamically adjusting the voltage and frequency of the network equipment or by switching off some internal components of the equipment at idle time. The latter is referred
      to as idle logic. Sleep/standby mode, which requires switching unused equipment/devices to lower power mode and wake them up when network activity resumes. However, due to the network connectivity requirements 
      of network equipment, this approach is difficult to use in real network scenario. Techniques such as proxying is proposed to alleviate this challenge. 

*** DONE A Power Benchmarking Framework for Network Devices 
    CLOSED: [2017-01-18 mer. 20:06]
    The purpose of this paper is to design power consumption model for a network by using a standard power consumption benchmark. The authors first
    developed the benchmark, which allows to compare power consumption of different network equipment. They devised a metric called Energy Proportionality Index (EPI). 
    EPI tells how a network equipment energy consumption pattern is different from the ideal proportional pattern. The ideal proportional energy consumption pattern
    specifies that the energy consumption of an equipment should directly correspond to the equipment traffic load.
    The amount of energy consumed by a network switch increases linearly as the number of line-cards and active ports increases. 
    Packet size does not have much influence on the energy consumption of a switch for a fixed traffic throughput.
    The maximum power rated by the manufacturer can deviate upto 70% from the actual power consumption
    The actual power consumed by a device depend largely on the device configuration (number and status of ports) and traffic load

    For the benchmarking process the authors used equipment from three different vendors and first measured the idle power consumption of the equipment by switching off all the ports,
    second they measured the maximum power consumption of the device by applying the maximum traffic load that the device is designed to handle (port bandwidth * (# of ports)).  
    
    The authors concluded that linear model can capture the total power consumption of switches/routers
*** TODO Energy Proportionality of an Enterprise Network
   
* Journal
** Important dates 
*** Course Related                                                                       
**** DONE PEV             Jan 13 (14:00-17:00)      Project evaluation 
    CLOSED: [2017-01-15 dim. 22:34]
**** DONE Pre-internship  Jan 16                    Report submission date (I can use the paper reviews I am currently doing for this report
    CLOSED: [2017-01-16 lun. 20:33]
**** TODO I&E Study       Jan 20                    Post assignment submission date                                                          
**** TODO I&E Study       Jan 30 (10:00 - 12:00)    Meeting for I&E study thesis progress                                                    
**** TODO I&E Study       Feb 2                     Online assignment submission date (I may need one full day to complete the report)       
**** TODO I&E Study       Feb 27 (10:00 - 12:00)    Meeting for I&E study thesis progress                                                                                                        
**** TODO I&E Study       March 20 (10:00 - 12:00)  Meeting for I&E study thesis progress
*** Aalto Related
    [[https://into.aalto.fi/display/eneitictinno/Entry+2015-2016][Internship process]]
**** TODO January to February           Starting to write master thesis                                          
**** TODO By 28 February                Official confirmation of thesis topic
**** TODO End of May/Beginning of June  Thesis presentation and Maturity test/Press release    
**** TODO June                          Enroll for Autumn semester if graduating after July 31 
**** TODO End of June                   Submit the jthesis                                      
*** UR1 Related 
**** By June 26    The thesis manuscript must be ready
**** By July 7     Thesis defense                      
**** July 10 - 14  Jury                
** Week 1 January 
   - Emacs installed and tried it, but found it difficult to get myself familiarize with it
   - Tried Spacemacs and noticed that it has VIM mode and found it quite easier to use, therefore, I have decided to use it
   - Tried Org-mode and this file is my first document produced with it
   - Information about integrating Emacs and Spacemacs is found [[http://jr0cket.co.uk/2015/08/spacemacs-first-impressions-from-an-emacs-driven-developer.html][here]]
   - SimGrid installed using the following command on Ubuntu machine
     sudo apt-get install simgrid
   - Tried to read "SimGrid 101" and "SimGrid and MSG 101" using slides available [[http://simgrid.gforge.inria.fr/tutorials.php][here]] 
   - Found another tutorial [[http://simgrid.gforge.inria.fr/simgrid/3.14/doc/tutorial.html][here]]  about SimGrid which is very nice because I was able to compile and run SimGrid based on the information provided there. However I met two errors while trying to build Pajeng
     1. the first issue was that flex was missing, solved after running sudo apt-get install flex
     2. the second issue was that bison was missing, solved after running sudo apt-get install bison
   - Started learning Org-mode. I am excited about it and want to go deep into it using the information available on the following links
     1. [[http://orgmode.org/worg/org-tutorials/org4beginners.html][Org mode for beginners]]
     2. [[http://doc.norang.ca/org-mode.html][Org mode tutorial]]
     3. [[http://sachachua.com/blog/2014/01/tips-learning-org-mode-emacs/][Tips for learning org mode]]
     4. [[http://orgmode.org/worg/org-tutorials/orgtutorial_dto.html][David O'Toole Org tutorial]] 
   - Refreshed my git knowledge watching [[https://www.youtube.com/watch?v=Y9XZQO1n_7c][this]] video 
   - Important Git commands and concepts
   #+Begin_src sh
     1. git init
     2. git config --global user.email "email address"
     3. git config --global user.name "user name" 
     4. git status 
     5. git add
     6. git commit -m "some message about the commit"
     7. git commit -a -m "some message about the commit"
     8. git log
     9. git add .
     10. git branch branch_name
     11. git checkout branch_name/master
     12. git clone URLBibliography
     13. git remote
     14. git remote -v
     15. git fetch origin
     16. git pull origin
     17. git push origin master/branch_name
     18. adding .gitignore file
   #+end_src
   - Created Git repository named "internship" to store all outputs of my internship
   - Information about using git with spacemacs is found [[https://alxndr.github.io/blog/2015/06/20/getting-started-with-Spacemacs.html][here]]
   - Read [[http://simgrid.gforge.inria.fr/simgrid/3.15/doc/group__SURF__plugin__energy.html][SimGrid Energy Plugin]] 
   - Read [[http://simgrid.gforge.inria.fr/tutorials/simgrid-energy-101.pdf][SimGrid Energy 101]] 
   - Read [[http://simgrid.gforge.inria.fr/simgrid/3.15/doc/group__SURF__plugin__energy.html][SimGrid Energy Plugin Docs]]
**** Questions
   - FLOPS/s is this notation correct in the slide shown in [[http://simgrid.gforge.inria.fr/tutorials/simgrid-energy-101.pdf][here]]? (floating point operations per second per second?) (compare slide 6/7/8)
   - Is this value <prop id="watt_per_state" value="100.0:120.0:200.0, 93.0:110.0:170.0, 90.0:105.0:150.0" /> found in examples/platforms/energy_platform.xml correct?
**** TODO Work Planned 
***** TODO Continue exploring spacemacs [[https://www.youtube.com/watch?v=ZFV5EqpZ6_s&list=PLrJ2YN5y27KLhd3yNs2dR8_inqtEiEweE][Spacemacs ABC tutorial]]
***** TODO Continue exploring Org-mode
     1. [[http://orgmode.org/worg/org-tutorials/org4beginners.html][Org Mode for Beginners]]
     2. [[https://github.com/fniessen/refcard-org-mode/blob/master/README.org][Org mode Reference card]]
     3. [[http://doc.norang.ca/org-mode.html][Org mode tutorial]] 
     4. [[http://sachachua.com/blog/2014/01/tips-learning-org-mode-emacs/][Tips for learning org mode]]
***** Read the following articles
****** DONE ECOFEN: an End-to-end energy Cost mOdel and simulator For Evaluating power consumption in large-scale Networks
       CLOSED: [2017-01-15 dim. 22:39]
****** TODO On the Energy Efficiency of Sleeping and Rate Adaptation for Network Devices
****** TODO [[http://hal.inria.fr/hal-01017319/PDF/simgrid3-journal.pdf][SimGrid 3]]
** Week 2 January 
    - Bibliography reviewed
**** Questions 
     [[file:img/scenario.png]]
     
     Taking the topology shown above (taken from ECOFEN) as an example, the objective of my internship is
     to use the ECOFEN energy model shown below in SimGrid simulator because SimGrid uses flow-based modeling
     
    [[file:img/model.png]] 
    - What I need to add to the above model is, the flow parameters such as bandwidth of the links, and 
      the size of traffic, then model the effect of each flow passing through a given link on the length of time it took to transfer the given traffic
      Is this a correct paraphrase of what I am expected to do in this
      internship? 
      - MQ: It's not really adding things to the models but more
        adapting the model, because some of the thing above are not
        part of the SimGrid view of the platform (eg, ports, network
        cards).
      - MQ: I'd advise to first try to adapt the SimGrid CPU energy
        model to the network, and see whether an instanciation of that
        model could get to the same result than EcoFEN.
      - MQ: Ie, try to get the same result with a brand new (but
        simplistic) model)
    
    - Is there an example in SimGrid which show the flow-based model used in SimGrid in action?
      - MQ: have a look at http://simgrid.gforge.inria.fr/tutorials/surf-101.pdf
   

**** Work Planned
     - Read the following papers
***** TODO [[http://hal.inria.fr/hal-00872476/PDF/tomacs.pdf][On the Validity of Flow-level TCP Network Models for Grid and Cloud Simulations]]
***** DONE Study how the flow-model is implemented in SimGrid
      CLOSED: [2017-01-16 lun. 22:02]
***** DONE [[https://hal.inria.fr/hal-01017319/PDF/simgrid3-journal.pdf][Versatile, Scalable, and Accurate Simulation of Distributed Applications and Platforms]]
      CLOSED: [2017-01-16 lun. 22:01]
***** DONE [[http://ieeexplore.ieee.org/document/5522467/][Energy efficiency in the future internet: a survey of existing approaches and trends in energy-aware fixed network infrastructures]]
      CLOSED: [2017-01-16 lun. 22:02]
** Week 3 January
**** Questions
    - Methodological question: When reviewing papers, is there any reason to summarize the whole paper unless I am working to extend/improve the work of the authors? Or is it not enough to just extract
     the information that I need for my work?
    - SimGrid: Are there router/switch concepts in SimGrid?
    - Proposed Model:
    #+begin_src latex
     
       P_equipment(t) = idle_equipment + EPI_equipment * P_equipment_atLoad(t)
       
    #+end_src

    - where, EPI_equipment is energy proportionality index. Which is computed by dividing the slope of the measured power consumption line to the slope of the ideal proportional line as it is shown [[http://link.springer.com/chapter/10.1007/978-3-642-01399-7_62][here]]
    - idle_equipment is the power consumed while the equipment is idle
    - P_equipment_atLoad(t) is the ideal instantaneous power consumed by the equipment at a given traffic load
    - The EPI value for network equipment is available from the benchmark study referenced. For example edge LAN switch has ~0.25, core switch 0.15, and core router 0.20
    - The load of a particular equipment at t for a given network can be found from the flow-based bandwidth sharing model used in SimGrid
    - The total energy consumption can be computed by integrating the power consumed by individual device during traffic transmission time
    - The required parameters for this model are: equipment type(core/edge switch or router), total bandwidth of the equipment, bandwidth and latency of the links (for bandwidth sharing model)
    - The limitation of this model is that the EPI values might change as technologies change.
    - Is there recommended level of detail for large scale network simulation (ports, connections, chassis, line cards, switches, routers)
    - If low level details such as ports are not considered, how do we study energy saving techniques using SimGrid, such as rate adaptation and switching off unused ports for energy saving
    - If a switch has 24 ports with 1Gbs maximum capacity each, is it reasonable to model the 24 ports as the bandwidth/capacity of the switch by just considering the switch capacity as 24 Gbps and 
      if half of the ports are turned off then the capacity of the switch is now 12Gbps?
**** Work Planned
***** DONE Study SimGrid's energy model for CPU 
      CLOSED: [2017-01-18 mer. 17:42]
* Development
   - SimGrid HostEnergy plugin
     - SURF: 
       - Uses two files energy.hpp and energy.cpp
       - energy.hpp specifies/declares methods and variables and energy.cpp implements them
       - initWattsRangeList() is one of the methods specified in energy.cpp/hpp and extracts watts_per_state values listed in energy_platform.xml file and puts them in array
       - getCurrentWattsValue(double cpuLoad) estimmate the current power consumption of CPU by applying the CPU power consumption model using cpuLoad as a parameter
       - update() method computes the power consumed for a duration of time, that is the energy used
    - MSG:
       - There are several methods related to host such as turning host on/off, getting the pstate, speed, number of cores ... and also to know the host status whether it is on or off
    - Users can write their simulation using the MSG API and the platform file

 
   - 
** Data Provenance

** Data Analysis
* Conclusion
